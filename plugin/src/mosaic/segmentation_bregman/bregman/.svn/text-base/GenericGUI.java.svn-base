package bregman;

import java.io.File;

import ij.IJ;
import ij.ImagePlus;
import ij.gui.GenericDialog;

public class GenericGUI {

	public void run(String arg) {
		//String modes[] = {"folder", "single file"};
		GenericDialog gd = new GenericDialog("BregmanGLM");

		gd.addCheckbox("Remove background", true);
		gd.addCheckbox("Local thresholding", true);
		gd.addCheckbox("Use PSF",true);
		gd.addCheckbox("Cell_mask_X", false);
		gd.addCheckbox("Cell_mask_Y", false);


		gd.addNumericField("Lambda prior: ", 0.075, 3);
		gd.addNumericField("Minimum object size: ", 5, 0);
		gd.addNumericField("Maximum object size: ", -1, 0);
		gd.addNumericField("Minimum object intensity channel 1: ", 0.15, 2);
		gd.addNumericField("Minimum object intensity channel 2: ", 0.15, 2);

		gd.addNumericField("Number of levels",2,0);



		gd.addMessage("Select file or folder:");
		gd.addStringField("Path: ", "/working_directory",30);

		gd.showDialog();
		if (gd.wasCanceled()) return;

		Analysis.p.removebackground= gd.getNextBoolean();
		Analysis.p.findregionthresh= gd.getNextBoolean();
		Analysis.p.usePSF=gd.getNextBoolean();
		Analysis.p.usecellmaskX= gd.getNextBoolean();
		Analysis.p.usecellmaskY= gd.getNextBoolean();

		Analysis.p.lreg= gd.getNextNumber();
		Analysis.p.minves_size=(int) gd.getNextNumber();
		Analysis.p.maxves_size=(int) gd.getNextNumber();

		Analysis.p.min_intensity=gd.getNextNumber();
		Analysis.p.min_intensityY=gd.getNextNumber();

		Analysis.p.nlevels=(int) gd.getNextNumber();

		Analysis.p.save_images= true;

		Analysis.p.dispvesicles = false;
		String wpath=  gd.getNextString();
		
		//IJ.log(Analysis.p.wd);


		//		      ImagePlus imagePlus = IJ.getImage();
		//				if (imagePlus == null) {
		//					IJ.error("No image to operate on.");
		//					return;
		//				}
		//IJ.log("GUI");
		Headless hd= new Headless(wpath);	
		//		    hd.bcolocheadless(imagePlus);

		//Analysis.load2channels(imagePlus);
	}
}
