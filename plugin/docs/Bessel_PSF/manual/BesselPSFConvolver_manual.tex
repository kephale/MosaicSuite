\documentclass{scrartcl}
\usepackage[ansinew]{inputenc}
%\usepackage[T1]{fontenc}
%\usepackage[ngerman]{babel} % Neue Rechtschreibung
\usepackage{amsmath} % Verbesserter Mathesatz
\usepackage{amssymb} 
\usepackage{graphicx}
\usepackage{listings}
\usepackage{color}

\parskip1ex

\lstset{language=Java}
\lstset{numbers=right, numberstyle=\tiny, numbersep=5pt, tabsize=3, breaklines=true}
\lstset{basicstyle=\small\ttfamily,stringstyle=\ttfamily, keywordstyle=\color{blue}\bfseries,commentstyle=\color{OliveGreen}}

\title{\begin{small}Manual\end{small}\\Convolution with a Bessel PSF in ImageJ}
\date{January 2008. (Rev. Nov 2010)}
\author{Janick Cardinale, \texttt{janickc@inf.ethz.ch} \\ MOSAIC Group, ETH Zürich, www.mosaic.ethz.ch}
\begin{document}  

\maketitle

\section{Introduction}
\label{sec:intro}
This \textit{ImageJ} plugin convolves 2D images or movies (image stacks) with a 2D Bessel point spread function (PSF). 

The convolution kernel of size $w \times h$ reads\cite{danuser}:
\begin{eqnarray}
PSF(x,y) & = & \left(\frac{2J_1(a \sqrt{x^2+y^2})}{\sqrt{(x^2+y^2)}} \right) \\
a & = & \frac{2\pi\;{NA}}{\lambda} \nonumber
\end{eqnarray}
with $x\in\left[-w/2,w/2\right]$ and $y\in\left[-h/2,h/2\right]$ the coordinates measured from the center of the kernel. $w$ and $h$ are equal to the user defined parameter $r_{max}$. $J_1(x)$ stands for the Bessel function of order one. The implementation of this function is taken from \cite{Pang}. The convolution is performed by the ImageJs \texttt{ImageProcessor} classes.

\section{Installation}
Copy the \texttt{mosaic\_plugins.jar} file to the ImageJs \texttt{plugins} directory. Restart ImageJ. The plugin can be launched from the \texttt{Mosaic} submenu in ImageJs plugin menu. 

The plugin handles 8-bit, 16-bit and 32-bit grayscale images or stacks. 

Prerequisits: At least Java 5.0 and ImageJ 1.36.

\section{How to use the plugin}
Open the image or an image stack in ImageJ to process. Make sure that the \textit{pixel width} and \textit{pixel height} properties are set correctly in the image properties dialog. Use the \texttt{Ctrl-p} shortcut to open this dialog. Please note that the plugin only recognizes the metric system. 

Start processing by selecting the \texttt{BesselPSF Convolver} entry in the \texttt{plugin$\rightarrow$mosaic} menu. You might process only one slice or even the whole stack.

Please note that there is no undo for this operation.

The parameters to enter in the dialog before the calculation starts are:
\begin{itemize}
	\item \textbf{Numerical Apparture} The numerical apparture $NA$ of the objective lens.
	\item \textbf{Wavelength} The wavelength $\lambda$ of the light emitted by the specimen and gathered at the sensor.
	\item \textbf{Max Radius} The maximal radius $r_{max}$ of the convolution kernel. For all pixel not in that range, the effect is neglected. Please note that the calculation time is proportional to $r_{max}^2$.
\end{itemize}

\section{Disclaimer}
IN NO EVENT SHALL THE ETH BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF THE ETH HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. THE ETH SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE ETH HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.

\bibliographystyle{abbrv}
\bibliography{refs}

\end{document}

